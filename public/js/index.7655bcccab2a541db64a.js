!function(e){function t(t){for(var r,i,c=t[0],s=t[1],u=t[2],l=0,f=[];l<c.length;l++)i=c[l],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&f.push(o[i][0]),o[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(d&&d(t);f.length;)f.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,c=1;c<n.length;c++){var s=n[c];0!==o[s]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={0:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var c=window.webpackJsonp=window.webpackJsonp||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var d=s;a.push([131,1]),n()}({131:function(e,t,n){n(132),e.exports=n(342)},334:function(e,t,n){var r=n(335);"string"==typeof r&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};n(66)(r,o);r.locals&&(e.exports=r.locals)},335:function(e,t,n){},336:function(e,t,n){var r=n(337);"string"==typeof r&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};n(66)(r,o);r.locals&&(e.exports=r.locals)},337:function(e,t,n){},338:function(e,t,n){var r=n(339);"string"==typeof r&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};n(66)(r,o);r.locals&&(e.exports=r.locals)},339:function(e,t,n){},340:function(e,t,n){var r=n(341);"string"==typeof r&&(r=[[e.i,r,""]]);var o={insert:"head",singleton:!1};n(66)(r,o);r.locals&&(e.exports=r.locals)},341:function(e,t,n){},342:function(e,t,n){"use strict";n.r(t);n(334),n(336),n(338),n(340);function r(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.apiKey="b09139bfceb545c4a56068e424f433a7"}var t,n,a,i,c;return t=e,n=[{key:"getNewsByCountry",value:function(t,n){return e.getNewsBy("https://newsapi.org/v2/top-headlines?country=".concat(t,"&category=").concat(n||"general","&pageSize=100&apiKey=").concat(this.apiKey))}},{key:"getNewsByResource",value:function(t){return e.getNewsBy("https://newsapi.org/v2/top-headlines?sources=".concat(t,"&apiKey=").concat(this.apiKey))}},{key:"getNewsByQuery",value:function(t){return e.getNewsBy("https://newsapi.org/v2/everything?q=".concat(t,"&apiKey=").concat(this.apiKey))}},{key:"getFlag",value:(i=regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://restcountries.eu/rest/v2/all");case 2:return r=e.sent,e.next=5,r.json();case 5:return e.sent.forEach((function(e){t.toLowerCase()===e.name.toLowerCase()&&(n=e.flag)})),e.abrupt("return",n||"notFoundFlag");case 8:case"end":return e.stop()}}),e)})),c=function(){var e=this,t=arguments;return new Promise((function(n,o){var a=i.apply(e,t);function c(e){r(a,n,o,c,s,"next",e)}function s(e){r(a,n,o,c,s,"throw",e)}c(void 0)}))},function(e){return c.apply(this,arguments)})}],a=[{key:"getNewsBy",value:function(e){return new Promise((function(t,n){fetch(e).then((function(e){return e.json()})).then((function(e){"ok"===e.status?t(e):n(e.message)})).catch((function(e){return n(e)}))}))}}],n&&o(t.prototype,n),a&&o(t,a),e}();function i(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){i(a,r,o,c,s,"next",e)}function s(e){i(a,r,o,c,s,"throw",e)}c(void 0)}))}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r,o,a,i,u;return t=e,n=[{key:"addToFavoriteToDb",value:(u=c(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.postTemplate("addToFavorite",n));case 1:case"end":return t.stop()}}),t)}))),function(e){return u.apply(this,arguments)})},{key:"removeFromFavoriteFromDb",value:(i=c(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.postTemplate("removeFromFavorite",{id:n}));case 1:case"end":return t.stop()}}),t)}))),function(e){return i.apply(this,arguments)})},{key:"getFavoriteNewsFromDb",value:(a=c(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/get-favorite-news");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})}],r=[{key:"postTemplate",value:(o=c(regeneratorRuntime.mark((function e(t,n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/".concat(t),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(n)});case 2:return r=e.sent,o=r.json(),e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)}))),function(e,t){return o.apply(this,arguments)})}],n&&s(t.prototype,n),r&&s(t,r),e}();function d(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){d(a,r,o,i,c,"next",e)}function c(e){d(a,r,o,i,c,"throw",e)}i(void 0)}))}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r,o,a,i,c;return t=e,n=[{key:"logIn",value:(c=l(regeneratorRuntime.mark((function t(n,r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.postTemplate("/login",{email:n,password:r}));case 1:case"end":return t.stop()}}),t)}))),function(e,t){return c.apply(this,arguments)})},{key:"logOut",value:(i=l(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/logOut");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})},{key:"register",value:(a=l(regeneratorRuntime.mark((function t(n,r,o){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.postTemplate("/register",{name:n,email:r,password:o}));case 1:case"end":return t.stop()}}),t)}))),function(e,t,n){return a.apply(this,arguments)})},{key:"resetPassword",value:function(){var t=l(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.postTemplate("/reset",{email:n}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"changePassword",value:function(){var t=l(regeneratorRuntime.mark((function t(n,r,o){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.postTemplate("/password",{userId:n,password:r,token:o}));case 1:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}],r=[{key:"postTemplate",value:(o=l(regeneratorRuntime.mark((function e(t,n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(n)});case 2:return r=e.sent,o=r.json(),e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)}))),function(e,t){return o.apply(this,arguments)})}],n&&f(t.prototype,n),r&&f(t,r),e}();function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.result=[]}var t,n,r;return t=e,(n=[{key:"checkFields",value:function(e){var t=this;this.result=[];var n=function(n){var r=e[n];Array.isArray(r)?r.forEach((function(e){t.result.push(t[n](e))})):t.result.push(t[n](r))};for(var r in e)n(r);return this.checkResult()}},{key:"checkResult",value:function(){var e=0;return this.result.forEach((function(t){t&&e++})),e===this.result.length}},{key:"text",value:function(e){var t=e.value;return 0===t.length?(this.showValidateError(e,"This field must be fill!"),!1):t.length<3?(this.showValidateError(e,"Name should have at least 3 characters!"),!1):(this.removeValidateError(e),!0)}},{key:"email",value:function(e){var t=e.value,n=new RegExp("[-.\\w]+@([\\w-]+\\.)+[\\w-]","g"),r=t.match(n);return 0===t.length?(this.showValidateError(e,"This field must be fill!"),!1):r?(this.removeValidateError(e),!0):(this.showValidateError(e,"Please type correct email!"),!1)}},{key:"password",value:function(e){var t=e.value;return 0===t.length?(this.showValidateError(e,"This field must be fill!"),!1):t.length<6?(this.showValidateError(e,"Password should have at least 6 characters!"),!1):(this.removeValidateError(e),!0)}},{key:"showValidateError",value:function(e,t){this.removeValidateError(e);var n=e.closest(".form-group"),r=document.createElement("span");e.style.borderColor="#e2591b",r.className="validate-error",r.textContent=t,r.style.cssText="\n             position: absolute;\n             top: 100%;\n             left: 0;\n             color: #ff9900;\n             font-size: 13px;\n             font-style: italic;\n             line-height: 1.4em;\n             z-index: 101;\n            ",n.appendChild(r)}},{key:"removeValidateError",value:function(e){var t=e.closest(".form-group").querySelector(".validate-error");t&&(e.style.borderColor="#caff00",t.remove())}}])&&v(t.prototype,n),r&&v(t,r),e}();function h(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function y(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function g(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){y(a,r,o,i,c,"next",e)}function c(e){y(a,r,o,i,c,"throw",e)}i(void 0)}))}}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var b,k=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.newsContainer=document.querySelector(".row.news-container"),this.timers=[]}var t,n,r;return t=e,n=[{key:"showNews",value:function(t){var n=this,r=0;t.length<=3?(document.body.style.overflowY="scroll",setTimeout((function(){document.body.style.overflowY="auto"}),1200)):t.length>3&&(document.body.style.overflowY="scroll"),t.forEach((function(t,o){var a=t.author,i=t.description,c=t.publishedAt,s=t.source,u=t.title,d=t.url,l=t.urlToImage;if(a||i||u){var f=setTimeout((function(){var r='\n                 <div class="col-4 animated fadeInUp fast">\n                    <div class="card news-item text-white bg-primary">\n                        <div class="close-description-icon">&#10005;</div>\n                        <div class="description">\n                            <h3 class="title">'.concat(u,'</h3>\n                            <p class="content">').concat(i,'</p>\n                        </div>\n                        \x3c!--/description--\x3e\n                        <div class="card-header">\n                            <img\n                                src="').concat(o<9?l:"img/lazy-grey.jpg",'"\n                                data-src="').concat(l||"img/img-error.jpg",'" alt="').concat(u,'"\n                                onerror="this.src = \'img/img-error.jpg\'"\n                            >\n                            <h3 class="card-title">\n                               ').concat(u.length<130?u:u.slice(0,127)+"...",'\n                            </h3>\n                            <div class="news-info">\n                                <span>\n                                    <a href="http://').concat(s.name,'" target="_blank">\n                                        ').concat(e.formatAuthor(a),"\n                                    </a>\n                                </span>\n                                <span>").concat(e.formatDate(c),'</span>\n                            </div>\n                            \x3c!--/news-info--\x3e\n                        </div>\n                        \x3c!--/card-header--\x3e\n                        <div class="card-body">\n                            <div class="left">\n                                <a href="').concat(d,'" class="btn btn-primary" target="_blank">View in source</a>                            \n                                <button type="button" class="btn btn-primary read-more">Read more</button>\n                            </div>\n                            \x3c!--/left--\x3e\n                            <div class="right">\n                                <i class="far fa-copy"\n                                   data-toggle="tooltip"\n                                   data-placement="top"\n                                   title="Copy link">\n                                </i>\n                                <i class="').concat(t._id?"fas":"far",' fa-heart"\n                                    ').concat(t._id?"data-base-Id=".concat(t._id):"",'\n                                   data-toggle="tooltip"\n                                   data-placement="top"\n                                   title="Add to favorite">\n                                   <input type="text" value="').concat(d,'" id="copy-text">\n                                </i>\n                            </div>\n                            \x3c!--/right--\x3e\n                        </div>\n                        \x3c!--/card-body--\x3e\n                    </div>\n                    \x3c!--/card--\x3e\n                </div>\n                \x3c!--/col-4--\x3e');n.newsContainer.insertAdjacentHTML("beforeend",r),$('[data-toggle="tooltip"]').tooltip()}),r);r+=300,n.timers.push(f)}}))}},{key:"cleanNewsContainer",value:function(){e.clearTimeout(this.timers),this.newsContainer.innerHTML=""}},{key:"showAlert",value:function(e,t){var n=e.toLowerCase(),r='\n            <div class="alert alert-dismissible alert-'.concat(n,' animated">\n                ').concat("info"===n?"":'<button type="button" class="close" data-dismiss="alert">&#10005;</button>',"\n                ").concat("info"===n?"":'<p class="alert-header">'.concat("warning"===n?"Error":e,"</p>"),'\n                <p class="alert-content">').concat(t,"</p>\n            </div>"),o=document.querySelector(".alert");o&&o.remove(),document.body.insertAdjacentHTML("afterbegin",r);var a=document.querySelector(".alert");function i(){a.remove(),a.removeEventListener("animationend",i)}a.classList.add("fadeInUp"),a.addEventListener("animationend",(function e(){a.classList.replace("fadeInUp","fadeOutUp"),a.classList.add("delay-2s"),a.removeEventListener("animationend",e),a.addEventListener("animationend",i)}))}},{key:"showSpinner",value:function(){this.newsContainer.insertAdjacentHTML("afterbegin",'\n        <div class="lds-css ng-scope">\n            <div class="lds-spin">\n                <div>\n                    <div></div>\n                </div>\n                <div>\n                    <div></div>\n                </div>\n                <div>\n                    <div></div>\n                </div>\n                <div>\n                    <div></div>\n                </div>\n                <div>\n                    <div></div>\n                </div>\n                <div>\n                    <div></div>\n                </div>\n                <div>\n                    <div></div>\n                </div>\n                <div>\n                    <div></div>\n                </div>\n            </div>\n        </div>')}},{key:"showModal",value:function(e){var t=document.querySelectorAll(".news-container .card")||0;$(".modal").modal("show"),t.length>3&&(document.body.style.paddingRight="0")}},{key:"hideModal",value:function(e){$(".modal").modal("hide")}},{key:"returnSmallSpinner",value:function(){return'\n        <div class="lds-css ng-scope">\n            <div class="lds-spin">\n                <div>\n                    <div></div>\n                </div>\n                <div>\n                    <div></div>\n                </div>\n                <div>\n                    <div></div>\n                </div>\n                <div>\n                    <div></div>\n                </div>\n                <div>\n                    <div></div>\n                </div>\n                <div>\n                    <div></div>\n                </div>\n                <div>\n                    <div></div>\n                </div>\n                <div>\n                    <div></div>\n                </div>\n            </div>\n        </div>\n        '}},{key:"deleteSmallSpinner",value:function(){var e=document.querySelector("header .searching-list .lds-css");e&&e.remove()}}],r=[{key:"formatDate",value:function(e){var t=new Date(e);return new Intl.DateTimeFormat("ru",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}).format(t)}},{key:"formatAuthor",value:function(e){return e?e.length<28?e:e.slice(0,25)+".....":"......"}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){E.timers.forEach((function(e){return clearTimeout(e)})),E.timers=[]}))}],n&&w(t.prototype,n),r&&w(t,r),e}(),x=new a,S=new u,E=new k,L=new m,T=new p,A=[{name:"Argentina",code:"ar",id:"country"},{name:"Australia",code:"au",id:"country"},{name:"Austria",code:"at",id:"country"},{name:"Belgium",code:"be",id:"country"},{name:"Brazil",code:"br",id:"country"},{name:"Bulgaria",code:"bg",id:"country"},{name:"Canada",code:"ca",id:"country"},{name:"China",code:"cn",id:"country"},{name:"Colombia",code:"co",id:"country"},{name:"Cuba",code:"cu",id:"country"},{name:"Czech Republic",code:"cz",id:"country"},{name:"Egypt",code:"eg",id:"country"},{name:"France",code:"fr",id:"country"},{name:"Germany",code:"de",id:"country"},{name:"Greece",code:"gr",id:"country"},{name:"Hong Kong",code:"hk",id:"country"},{name:"Hungary",code:"hu",id:"country"},{name:"India",code:"in",id:"country"},{name:"Indonesia",code:"id",id:"country"},{name:"Ireland",code:"ie",id:"country"},{name:"Israel",code:"il",id:"country"},{name:"Italy",code:"it",id:"country"},{name:"Japan",code:"jp",id:"country"},{name:"Latvia",code:"lv",id:"country"},{name:"Lithuania",code:"lt",id:"country"},{name:"Malaysia",code:"my",id:"country"},{name:"Mexico",code:"mx",id:"country"},{name:"Morocco",code:"ma",id:"country"},{name:"Netherlands",code:"nl",id:"country"},{name:"New Zealand",code:"nz",id:"country"},{name:"Nigeria",code:"ng",id:"country"},{name:"Norway",code:"no",id:"country"},{name:"Philippines",code:"ph",id:"country"},{name:"Poland",code:"pl",id:"country"},{name:"Portugal",code:"pt",id:"country"},{name:"Romania",code:"ro",id:"country"},{name:"Russia",code:"ru",id:"country"},{name:"Saudi Arabia",code:"sa",id:"country"},{name:"Serbia",code:"rs",id:"country"},{name:"Singapore",code:"sg",id:"country"},{name:"Slovakia",code:"sk",id:"country"},{name:"Slovenia",code:"si",id:"country"},{name:"South Africa",code:"za",id:"country"},{name:"South Korea",code:"kr",id:"country"},{name:"Sweden",code:"se",id:"country"},{name:"Switzerland",code:"ch",id:"country"},{name:"Taiwan",code:"tw",id:"country"},{name:"Thailand",code:"th",id:"country"},{name:"Turkey",code:"tr",id:"country"},{name:"UAE",code:"ae",id:"country"},{name:"Ukraine",code:"ua",id:"country"},{name:"United Kingdom",code:"gb",id:"country"},{name:"United States",code:"us",id:"country"},{name:"Venuzuela",code:"ve",id:"country"}],N=[{name:"General",code:"general"},{name:"Business",code:"business"},{name:"Entertainment",code:"entertainment"},{name:"Health",code:"health"},{name:"Science",code:"science"},{name:"Sports",code:"sports"},{name:"Technology",code:"technology"}],q=[{name:"ABC News",code:"abc-news",id:"resource"},{name:"Ars Technica",code:"ars-technica",id:"resource"},{name:"Ary News",code:"ary-news",id:"resource"},{name:"Associated Press",code:"associated-press",id:"resource"},{name:"BBC News",code:"bbc-news",id:"resource"},{name:"BBC Sport",code:"bbc-sport",id:"resource"},{name:"Bloomberg",code:"bloomberg",id:"resource"},{name:"Business Insider",code:"business-insider",id:"resource"},{name:"CBC News",code:"cbc-news",id:"resource"},{name:"CNN",code:"cnn",id:"resource"},{name:"Crypto Coins News",code:"crypto-coins-news",id:"resource"},{name:"Daily Mail",code:"daily-mail",id:"resource"},{name:"Entertainment Weekly",code:"entertainment-weekly",id:"resource"},{name:"Financial Post",code:"financial-post",id:"resource"},{name:"Focus",code:"focus",id:"resource"},{name:"Fortune",code:"fortune",id:"resource"},{name:"Fox News",code:"fox-news",id:"resource"},{name:"Fox Sports",code:"fox-sports",id:"resource"},{name:"Google News",code:"google-news",id:"resource"},{name:"Google News (Argentina)",code:"google-news-ar",id:"resource"},{name:"Google News (Australia)",code:"google-news-au",id:"resource"},{name:"Google News (Brasil)",code:"google-news-br",id:"resource"},{name:"Google News (Canada)",code:"google-news-ca",id:"resource"},{name:"Google News (France)",code:"google-news-fr",id:"resource"},{name:"Google News (India)",code:"google-news-in",id:"resource"},{name:"Google News (Israel)",code:"google-news-is",id:"resource"},{name:"Google News (Italy)",code:"google-news-it",id:"resource"},{name:"Google News (Russia)",code:"google-news-ru",id:"resource"},{name:"Google News (Saudi Arabia)",code:"google-news-sa",id:"resource"},{name:"Google News (UK)",code:"google-news-uk",id:"resource"},{name:"Hacker News",code:"hacker-news",id:"resource"},{name:"Independent",code:"independent",id:"resource"},{name:"Lenta",code:"lenta",id:"resource"},{name:"Marca",code:"marca",id:"resource"},{name:"Mirror",code:"mirror",id:"resource"},{name:"National Geographic",code:"national-geographic",id:"resource"},{name:"National Review",code:"national-review",id:"resource"},{name:"NBC News",code:"nbc-news",id:"resource"},{name:"News24",code:"news24",id:"resource"},{name:"New Scientist",code:"new-scientist",id:"resource"},{name:"Politico",code:"politico",id:"resource"},{name:"The New York Times",code:"the-new-york-times",id:"resource"},{name:"The Wall Street Journal",code:"the-wall-street-journal",id:"resource"},{name:"The Washington Post",code:"the-washington-post",id:"resource"},{name:"The Washington Times",code:"the-washington-times",id:"resource"}],C=A.concat(q),R=document.querySelector(".row.news-container"),j=$(".show-modal-wrapper"),I=$(".close-icon-modal");function P(){return(P=g(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(document.querySelector(".navbar-nav .favorite-news.active")){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,E.showSpinner(),e.next=7,S.getFavoriteNewsFromDb();case 7:if((n=e.sent).length){e.next=12;break}return E.cleanNewsContainer(),document.querySelector(".news-container").innerHTML="<h1>You don't have favorite news yet!",e.abrupt("return");case 12:E.cleanNewsContainer(),b=n,E.showNews(n),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),E.showAlert("Warning","We can't find your favorite news:"+e.t0.message);case 20:case"end":return e.stop()}}),e,null,[[3,17]])})))).apply(this,arguments)}function F(){return(F=g(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=300*t+5e3,r=setInterval(g(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.getFavoriteNewsFromDb();case 3:t=e.sent,document.querySelectorAll(".card .description .title").forEach((function(e){var n=e.textContent;t.forEach((function(t){if(t.title===n){var r=e.closest(".card").querySelector(".fa-heart");r.classList.replace("far","fas"),r.setAttribute("data-base-Id",t._id)}}))})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),E.showAlert("Warning","We can't check your favorite news!");case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),2e3),setTimeout((function(){return clearInterval(r)}),n);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){var t=e.target;if(t.closest("header input.form-control")||t.closest("header .searching-list li")){var n=document.querySelector(".searching-list li.active"),r=document.querySelector("header input.form-control");n?(r.setAttribute("data-code",n.dataset.code),r.setAttribute("data-id",n.dataset.id)):(r.setAttribute("data-code",""),r.setAttribute("data-id",""))}}function M(e){var t=e.arr,n=e.selector,r=e.selectedValue,o=e.selectedText,a=document.querySelector(n),i=t.map((function(e,t){return 0===t?"<option selected value =".concat(r,">").concat(o,"</option>"):'<option value="'.concat(e.code,'">').concat(e.name,"</option>")})).join();a.insertAdjacentHTML("afterbegin",i)}function O(e,t){e.preventDefault(),E.cleanNewsContainer(),E.hideModal(),E.showSpinner();for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];t.apply(x,r).then((function(e){if(b=e.articles,E.cleanNewsContainer(),e.articles.length>0)return E.showNews(e.articles),void function(e){F.apply(this,arguments)}(e.articles.length);E.showAlert("Warning","We could'nt find any news for this request!")})).catch((function(e){E.cleanNewsContainer(),E.showAlert("Warning",e)}))}function D(){return(D=g(regeneratorRuntime.mark((function e(t){var n,r,o,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=t.target,document.querySelector(".navbar-nav .logIn.active")){e.next=4;break}return e.abrupt("return");case 4:if(n.closest("#login-form")){e.next=6;break}return e.abrupt("return");case 6:if(r=document.querySelector("#login-form"),o=r.email,a=r.password,T.checkFields({email:o,password:[a]})){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,L.logIn(o.value,a.value);case 13:"ok"===(i=e.sent).status?window.location.replace("/"):E.showAlert("Warning",i.message);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=g(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.target.closest(".navbar-nav .logOut")){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,L.logOut();case 5:"ok"===(n=e.sent).status?window.location.replace("/login"):E.showAlert("Warning",n.message);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return(V=g(regeneratorRuntime.mark((function e(t){var n,r,o,a,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),(n=t.target).closest){e.next=4;break}return e.abrupt("return");case 4:if(n.closest("#register-form")){e.next=6;break}return e.abrupt("return");case 6:if(r=document.querySelector("#register-form"),o=r.name,a=r.email,i=r.password,T.checkFields({text:o,email:a,password:i})){e.next=12;break}return e.abrupt("return");case 12:return e.next=14,L.register(o.value,a.value,i.value);case 14:"ok"===(c=e.sent).status?(r.reset(),E.showAlert("Info","Success"),$("#home-tab").tab("show")):E.showAlert("Warning",c.message);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return(W=g(regeneratorRuntime.mark((function e(t){var n,r,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),(n=t.target).closest){e.next=4;break}return e.abrupt("return");case 4:if(n.closest("#reset-form")){e.next=6;break}return e.abrupt("return");case 6:if(r=document.querySelector("#reset-form"),o=r.email,T.checkFields({email:o})){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,L.resetPassword(o.value);case 12:"ok"===(a=e.sent).status?(r.reset(),o.blur(),E.showAlert("Success",a.message),setTimeout((function(){window.location.replace("/login")}),4500)):E.showAlert("Warning",a.message);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=g(regeneratorRuntime.mark((function e(t){var n,r,o,a,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),(n=t.target).closest){e.next=4;break}return e.abrupt("return");case 4:if(n.closest("#reset-password-form")){e.next=6;break}return e.abrupt("return");case 6:if(r=document.querySelector("#reset-password-form"),o=r.password,a=r.querySelector(".btn.btn-primary").dataset.userId,i=r.querySelector(".btn.btn-primary").dataset.token,T.checkFields({password:o})){e.next=12;break}return e.abrupt("return");case 12:return e.next=14,L.changePassword(a,o.value,i);case 14:"ok"===(c=e.sent).status?(r.reset(),o.blur(),E.showAlert("Success",c.message),setTimeout((function(){window.location.replace("/login")}),4500)):E.showAlert("Warning",c.message);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.addEventListener("load",(function(e){document.querySelector(".navbar-nav .active.main")&&(M({arr:A,selector:"#country",selectedValue:"ua",selectedText:"Choose country"}),M({arr:N,selector:"#category",selectedValue:"general",selectedText:"Choose news category"}),M({arr:q,selector:"#resource",selectedValue:"national-geographic",selectedText:"Choose news resource"}))})),window.addEventListener("load",(function(e){return P.apply(this,arguments)})),window.addEventListener("load",(function(e){if(!document.querySelector(".nav-item.active.logIn"))return;Promise.all([x.getNewsByCountry("ua","general"),x.getNewsByResource("google-news"),x.getNewsByResource("the-wall-street-journal")]).then((function(e){var t=[];e.forEach((function(e){t.push.apply(t,h(e.articles))}));var n=document.querySelector(".news-img-block"),r=document.querySelector(".news-img-block-inner"),o=document.querySelector("header").offsetHeight,a=document.documentElement.clientWidth;n.style.top=o+"px",n.style.height="calc(100vh - ".concat(o,"px)");for(var i=t.map((function(e){return e.urlToImage}));;){var c=document.createElement("div");c.className="img-wrapper";var s=document.createElement("img");if(c.appendChild(s),r.insertAdjacentElement("beforeend",c),c.getBoundingClientRect().left>=a){c.remove();break}}var u=document.querySelectorAll(".news-img-block-inner img");u.forEach((function(e,t){"null"!==i[t]&&""!==i[t]&&"undefined"!==i[t]||(e.src="img/semantic.png"),e.src=i[t],e.classList.add("img-show"),e.onerror=function(t){e.src="img/semantic.png"}}));var d=setInterval((function(){var e=Math.floor(Math.random()*i.length),t=Math.floor(Math.random()*u.length);u[t].classList.remove("img-show"),u[t].addEventListener("transitionend",(function n(){u[t].src=i[e],u[t].addEventListener("load",(function e(){u[t].classList.add("img-show");u[t].removeEventListener("transitionend",n);u[t].removeEventListener("load",e)}))}))}),2200);window.addEventListener("unload",(function(){clearInterval(d)}))})).catch((function(e){return console.log(e)}))})),window.addEventListener("scroll",(function(){var e=!0,t=!1,n=void 0;try{for(var r,o=document.querySelectorAll("img")[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=r.value,i=a.dataset.src;i&&(c=void 0,s=void 0,u=void 0,d=void 0,l=void 0,f=void 0,c=a.getBoundingClientRect(),s=document.documentElement.clientHeight,u=-s,d=2*s,l=c.top>u&&c.top<d,f=c.bottom<d&&c.bottom>u,(l||f)&&(a.src=i,a.dataset.src=""))}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}var c,s,u,d,l,f})),document.addEventListener("submit",(function(e){return D.apply(this,arguments)})),document.addEventListener("click",(function(e){return H.apply(this,arguments)})),document.addEventListener("submit",(function(e){return V.apply(this,arguments)})),document.addEventListener("submit",(function(e){return W.apply(this,arguments)})),document.addEventListener("submit",(function(e){return G.apply(this,arguments)})),document.addEventListener("click",(function(e){var t=e.target;if(!t.matches(".password-wrapper .fas.fa-eye"))return;var n=t.closest(".password-wrapper").querySelector("input.form-control");"password"===n.type?n.type="text":n.type="password"})),document.addEventListener("input",(function(e){if(!e.target.closest("header input.form-control"))return;var t=document.querySelector("header input.form-control"),n=document.querySelector("header .searching-list"),r=(a=t.value,i=C,i.filter((function(e){var t=new RegExp(a,"gi");return e.name.match(t)}))),o=r.map((function(e){var t=e.name,n=e.code,r=e.id;return'\n        <li data-name = "'.concat(t,'" data-code = "').concat(n,'" data-id = "').concat(r,'">\n            ').concat(t," ").concat("resource"===r?'<span class="hint">resource</span>':E.returnSmallSpinner(),"\n        </li>\n        ")})).slice(0,10).join("");var a,i;n.innerHTML=o,function(e){e.forEach((function(e,t){var n=e.name;"resource"!==e.id&&(t>10||x.getFlag(n).then((function(e){var t=document.querySelector('.searching-list li[data-name="'.concat(n,'"]'));t&&(E.deleteSmallSpinner(),t.querySelector("img")||t.querySelector("span.hint")||("notFoundFlag"===e?t.insertAdjacentHTML("beforeend",'<span class="hint">country</span>'):t.insertAdjacentHTML("beforeend",'<img src="'.concat(e,'" alt="">'))))})).catch((function(e){return console.log(e)})))}))}(r)})),document.addEventListener("input",(function(e){if(!e.target.closest("header input.form-control"))return;var t=document.querySelector("header input.form-control"),n=(document.querySelector("header .search-news-form"),document.querySelectorAll(".searching-list li"));if(!n[0])return;var r=0,o=n.length;n[0].classList.add("active"),n.forEach((function(e){e.addEventListener("mouseenter",(function(e){for(var t=e.target,o=0;o<n.length;o++)n[o].classList.remove("active");t.classList.add("active");var a=[].findIndex.call(n,(function(e){return e.classList.contains("active")}));r=a})),e.addEventListener("click",(function(e){B(e);var t=new Event("submit");document.dispatchEvent(t)}))})),t.addEventListener("keydown",(function(e){40===e.keyCode&&e.preventDefault(),38===e.keyCode&&e.preventDefault(),40===e.keyCode?(n[r].classList.remove("active"),++r>=o&&(r=0),n[r].classList.add("active")):38===e.keyCode&&(n[r].classList.remove("active"),--r<0&&(r=o-1),n[r].classList.add("active"))}))})),document.addEventListener("keyup",(function(e){return B(e)})),document.addEventListener("submit",(function(e){e.preventDefault();var t=e.target;if(!e.isTrusted)return void n();if(!t.closest("header .search-news-form"))return;function n(){var t=document.querySelector("header input.form-control"),n=document.querySelector("header .searching-list"),r=t.dataset.code||t.value,o=t.dataset.id;n.innerHTML="",t.value="",t.setAttribute("data-code",""),t.setAttribute("data-id",""),t.blur(),"country"===o?O(e,x.getNewsByCountry,r,"general"):O(e,"resource"===o?x.getNewsByResource:x.getNewsByQuery,r)}n()})),document.addEventListener("click",(function(e){var t=e.target;if(t.closest(".searching-list")||t.closest(".search-news-form .btn.btn-secondary"))return;var n=document.querySelector(".searching-list"),r=document.querySelector("header input.form-control");if(!n)return;r.value="",n.innerHTML=""})),j.on("click",E.showModal),I.on("click",E.hideModal),document.body.addEventListener("submit",(function(e){if(!e.target.closest("#country-form"))return;var t=document.querySelector("#country-form"),n=t.querySelector("#country").value,r=t.querySelector("#category").value;O(e,x.getNewsByCountry,n,r),t.reset()})),document.body.addEventListener("submit",(function(e){if(!e.target.closest("#source-form"))return;var t=document.querySelector("#source-form"),n=t.querySelector("#resource").value;O(e,x.getNewsByResource,n),t.reset()})),R.addEventListener("click",(function(e){var t=e.target;if(!t.closest(".right .fa-heart"))return;var n=t.closest(".card").querySelector(".description .title").textContent,r=b.find((function(e){return e.title===n}));if(t.classList.contains("far"))S.addToFavoriteToDb(r).then((function(e){!function(e){"ok"===e.status?(t.classList.replace("far","fas"),E.showAlert("Success","News added to favorite!"),t.setAttribute("data-base-Id",e.newsId)):E.showAlert("warning",e.message)}(e)}));else if(t.classList.contains("fas")){var o=t.getAttribute("data-base-Id");S.removeFromFavoriteFromDb(o).then((function(e){!function(e){if("ok"===e.status){t.classList.replace("fas","far"),document.querySelector(".navbar-nav .favorite-news").classList.contains("active")&&t.closest(".col-4").remove(),E.showAlert("Info","<span>News removed from favorite!</span>"),t.setAttribute("data-base-Id","")}else E.showAlert("warning",e.message)}(e)}))}})),R.addEventListener("click",(function(e){var t=e.target;if(!t.closest(".right .fa-copy"))return;var n=t.closest(".card").querySelector("#copy-text").value;navigator.clipboard.writeText(n).then((function(e){E.showAlert("Info","Link copied")})).catch((function(e){E.showAlert("Warning","Text not copied: ".concat(e))}))})),R.addEventListener("click",(function(e){var t=e.target,n=t.closest(".col-4 .card");if(!n)return;var r=n.querySelector(".left .read-more"),o=n.querySelector(".close-description-icon"),a=n.querySelector(".card-header"),i=n.querySelector(".description");t===r?(a.addEventListener("transitionend",(function e(t){i.classList.add("show");o.classList.add("show");a.removeEventListener("transitionend",e)})),n.classList.add("show-description")):t===o&&(i.addEventListener("transitionend",(function e(t){n.classList.remove("show-description");i.removeEventListener("transitionend",e)})),i.classList.remove("show"),o.classList.remove("show"));if(i.scrollHeight>i.offsetHeight){var c=i.querySelector("p.content"),s=i.querySelector("h3.title");o.style.right="20px",c.style.padding="10px 35px",s.style.padding="10px 35px"}}))}});